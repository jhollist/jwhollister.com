---
title: Easy Elevation for `rayshader` with `elevatr`
author: Jeffrey Hollister
draft: true
date: '2019-02-16'
categories:
  - R
  - GIS
tags:
  - spatial data
  - visualization
  - elevation
  - elevatr
  - rayshader
---

```{r}
library(rayshader)
library(elevatr)
library(raster)

data(lake)

lake_dem <- get_elev_raster(lake, z=10, clip = "bbox")

lake_dem_m <- matrix(extract(lake_dem,raster::extent(lake_dem),buffer=1000),
               nrow=ncol(lake_dem),ncol=nrow(lake_dem))

lake_dem_m %>%
  sphere_shade(texture = "desert") %>%
  #add_water(detect_water(lake_dem_m), color="desert") %>%
  #add_shadow(ray_shade(lake_dem_m,zscale=50,lambert=FALSE)) %>%
  #add_shadow(ambient_shade(lake_dem_m,zscale=50)) %>%
  plot_map()

loadzip = tempfile() 
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)

#And convert it to a matrix:
elmat = matrix(raster::extract(localtif,raster::extent(localtif),buffer=1000),
               nrow=ncol(localtif),ncol=nrow(localtif))

#We use another one of rayshader's built-in textures:
elmat %>%
  sphere_shade(texture = "desert") %>%
  plot_map()

```